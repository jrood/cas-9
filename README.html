<!DOCTYPE html><html><head><style>body{margin:0;padding:0;font-family:Figtree,system-ui}main{background:#f8f4f0;border-radius:2rem;max-width:768px;margin:0 auto;padding:2rem;box-shadow:inset 0 17rem #fff}p{line-height:1.5rem}.logo{justify-content:center;align-items:center;height:12rem;margin-bottom:4rem;display:flex}h1,h2,h3,h4{margin-top:2rem;margin-bottom:.5rem;font-weight:600}pre{border-radius:.5rem;padding:1rem;font-family:JetBrains Mono;font-size:14px;overflow-x:auto}code{font-family:inherit}.repo-link{flex-direction:row-reverse;display:flex}a{color:#f60}</style><link href="https://fonts.googleapis.com/css2?family=Figtree:wght@300..900&family=JetBrains+Mono&display=swap" rel="stylesheet"></head><body><main><div class="repo-link"><a href="https://github.com/jrood/cas-9">github.com/jrood/cas-9</a></div><div align="center" class="logo"><img src="./logo.svg"></div><p>Cas-9 is a small (less than 1 kB gzipped) JavaScript framework using JSX, signals, and fine-grained DOM updates. There is no VDOM. Component functions only run once.</p><p>⚠️ This is an experimental framework, not yet fit for production. If you&#39;re looking for a similar feature-rich and battle-tested solution, consider <a href="https://docs.solidjs.com/">Solid</a>.</p><h2>Why the name?</h2><p>In molecular biology, Cas9 is the &quot;gene scissors&quot; molecule used to make precise edits to DNA. This library is the size of a molecule and makes precise updates to the DOM.</p><h2>Concepts</h2><p>Create signals as getter/setter tuples.</p><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">const</span><span style="color:#24292E"> [</span><span style="color:#005CC5">myValue</span><span style="color:#24292E">, </span><span style="color:#005CC5">setMyValue</span><span style="color:#24292E">] </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> signal</span><span style="color:#24292E">(</span><span style="color:#032F62">'initial value'</span><span style="color:#24292E">);</span></span></code></pre><p>Access the value by calling as a function.</p><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#24292E">console.</span><span style="color:#6F42C1">log</span><span style="color:#24292E">(</span><span style="color:#6F42C1">myValue</span><span style="color:#24292E">());</span></span></code></pre><p>Bind to the dom by passing directly (without calling).</p><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#24292E">&#x3C;</span><span style="color:#22863A">div</span><span style="color:#24292E">>{myValue}&#x3C;/</span><span style="color:#22863A">div</span><span style="color:#24292E">></span></span></code></pre><p>Effects autodetect their dependencies according to which signals are called.</p><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">const</span><span style="color:#24292E"> [</span><span style="color:#005CC5">a</span><span style="color:#24292E">, </span><span style="color:#005CC5">setA</span><span style="color:#24292E">] </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> signal</span><span style="color:#24292E">(</span><span style="color:#005CC5">5</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#D73A49">const</span><span style="color:#24292E"> [</span><span style="color:#005CC5">b</span><span style="color:#24292E">, </span><span style="color:#005CC5">setB</span><span style="color:#24292E">] </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> signal</span><span style="color:#24292E">(</span><span style="color:#005CC5">8</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#6F42C1">effect</span><span style="color:#24292E">(() </span><span style="color:#D73A49">=></span><span style="color:#24292E"> {</span></span>
<span class="line"><span style="color:#24292E">  console.</span><span style="color:#6F42C1">log</span><span style="color:#24292E">(</span><span style="color:#6F42C1">a</span><span style="color:#24292E">() </span><span style="color:#D73A49">+</span><span style="color:#6F42C1"> b</span><span style="color:#24292E">());</span></span>
<span class="line"><span style="color:#24292E">});</span></span></code></pre><p>While component functions only run once, functions passed into jsx will run anytime underlying signals are updated.</p><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#24292E">&#x3C;</span><span style="color:#22863A">div</span><span style="color:#24292E">>{() </span><span style="color:#D73A49">=></span><span style="color:#6F42C1"> count</span><span style="color:#24292E">() </span><span style="color:#D73A49">%</span><span style="color:#005CC5"> 2</span><span style="color:#D73A49"> ?</span><span style="color:#032F62"> 'odd'</span><span style="color:#D73A49"> :</span><span style="color:#032F62"> 'even'</span><span style="color:#24292E">}&#x3C;/</span><span style="color:#22863A">div</span><span style="color:#24292E">></span></span></code></pre><p>Computed functions run lazily and are only executed once when a dependency changes, even if used by multiple effects, dom bindings, or other computeds.</p><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">const</span><span style="color:#005CC5"> sum</span><span style="color:#D73A49"> =</span><span style="color:#6F42C1"> computed</span><span style="color:#24292E">(() </span><span style="color:#D73A49">=></span><span style="color:#6F42C1"> a</span><span style="color:#24292E">() </span><span style="color:#D73A49">+</span><span style="color:#6F42C1"> b</span><span style="color:#24292E">());</span></span></code></pre><h2>Examples</h2><h3>Counter</h3><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">import</span><span style="color:#24292E"> { render, signal } </span><span style="color:#D73A49">from</span><span style="color:#032F62"> 'cas-9'</span><span style="color:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">function</span><span style="color:#6F42C1"> Counter</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#D73A49">  const</span><span style="color:#24292E"> [</span><span style="color:#005CC5">count</span><span style="color:#24292E">, </span><span style="color:#005CC5">setCount</span><span style="color:#24292E">] </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> signal</span><span style="color:#24292E">(</span><span style="color:#005CC5">0</span><span style="color:#24292E">);</span></span>
<span class="line"><span style="color:#D73A49">  return</span><span style="color:#24292E"> (</span></span>
<span class="line"><span style="color:#24292E">    &#x3C;></span></span>
<span class="line"><span style="color:#24292E">      &#x3C;</span><span style="color:#22863A">button</span><span style="color:#6F42C1"> onClick</span><span style="color:#D73A49">=</span><span style="color:#24292E">{() </span><span style="color:#D73A49">=></span><span style="color:#6F42C1"> setCount</span><span style="color:#24292E">(</span><span style="color:#6F42C1">count</span><span style="color:#24292E">() </span><span style="color:#D73A49">+</span><span style="color:#005CC5"> 1</span><span style="color:#24292E">)}></span></span>
<span class="line"><span style="color:#24292E">        {count}</span></span>
<span class="line"><span style="color:#24292E">      &#x3C;/</span><span style="color:#22863A">button</span><span style="color:#24292E">></span></span>
<span class="line"><span style="color:#24292E">      &#x3C;</span><span style="color:#22863A">div</span><span style="color:#24292E">>Double count: {() </span><span style="color:#D73A49">=></span><span style="color:#6F42C1"> count</span><span style="color:#24292E">() </span><span style="color:#D73A49">*</span><span style="color:#005CC5"> 2</span><span style="color:#24292E">}&#x3C;/</span><span style="color:#22863A">div</span><span style="color:#24292E">></span></span>
<span class="line"><span style="color:#24292E">    &#x3C;/></span></span>
<span class="line"><span style="color:#24292E">  );</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">render</span><span style="color:#24292E">(Counter, document.body);</span></span></code></pre><h3>Veggie search</h3><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#D73A49">import</span><span style="color:#24292E"> { computed, render, signal } </span><span style="color:#D73A49">from</span><span style="color:#032F62"> 'cas-9'</span><span style="color:#24292E">;</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">const</span><span style="color:#005CC5"> veggies</span><span style="color:#D73A49"> =</span><span style="color:#24292E"> [</span><span style="color:#032F62">'beet'</span><span style="color:#24292E">, </span><span style="color:#032F62">'carrot'</span><span style="color:#24292E">, </span><span style="color:#032F62">'radish'</span><span style="color:#24292E">, </span><span style="color:#032F62">'turnip'</span><span style="color:#24292E">, </span><span style="color:#032F62">'parsnip'</span><span style="color:#24292E">];</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">export</span><span style="color:#D73A49"> function</span><span style="color:#6F42C1"> VeggieSearch</span><span style="color:#24292E">() {</span></span>
<span class="line"><span style="color:#D73A49">  const</span><span style="color:#24292E"> [</span><span style="color:#005CC5">search</span><span style="color:#24292E">, </span><span style="color:#005CC5">setSearch</span><span style="color:#24292E">] </span><span style="color:#D73A49">=</span><span style="color:#6F42C1"> signal</span><span style="color:#24292E">(</span><span style="color:#032F62">''</span><span style="color:#24292E">);</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">  const</span><span style="color:#005CC5"> matches</span><span style="color:#D73A49"> =</span><span style="color:#6F42C1"> computed</span><span style="color:#24292E">(() </span><span style="color:#D73A49">=></span></span>
<span class="line"><span style="color:#24292E">    veggies.</span><span style="color:#6F42C1">filter</span><span style="color:#24292E">(</span><span style="color:#E36209">veggie</span><span style="color:#D73A49"> =></span></span>
<span class="line"><span style="color:#24292E">      veggie.</span><span style="color:#6F42C1">includes</span><span style="color:#24292E">(</span><span style="color:#6F42C1">search</span><span style="color:#24292E">())</span></span>
<span class="line"><span style="color:#24292E">    ),</span></span>
<span class="line"><span style="color:#24292E">  );</span></span>
<span class="line"></span>
<span class="line"><span style="color:#D73A49">  return</span><span style="color:#24292E"> (</span></span>
<span class="line"><span style="color:#24292E">    &#x3C;></span></span>
<span class="line"><span style="color:#24292E">      &#x3C;</span><span style="color:#22863A">input</span></span>
<span class="line"><span style="color:#6F42C1">        onInput</span><span style="color:#D73A49">=</span><span style="color:#24292E">{(</span><span style="color:#E36209">evt</span><span style="color:#24292E">) </span><span style="color:#D73A49">=></span><span style="color:#6F42C1"> setSearch</span><span style="color:#24292E">(evt.target.value)}</span></span>
<span class="line"><span style="color:#24292E">      /></span></span>
<span class="line"><span style="color:#24292E">      &#x3C;</span><span style="color:#22863A">ul</span><span style="color:#24292E">>{() </span><span style="color:#D73A49">=></span></span>
<span class="line"><span style="color:#6F42C1">        matches</span><span style="color:#24292E">().</span><span style="color:#6F42C1">map</span><span style="color:#24292E">(</span><span style="color:#E36209">veggie</span><span style="color:#D73A49"> =></span></span>
<span class="line"><span style="color:#24292E">          &#x3C;</span><span style="color:#22863A">li</span><span style="color:#24292E">>{veggie}&#x3C;/</span><span style="color:#22863A">li</span><span style="color:#24292E">></span></span>
<span class="line"><span style="color:#24292E">        )</span></span>
<span class="line"><span style="color:#24292E">      }&#x3C;/</span><span style="color:#22863A">ul</span><span style="color:#24292E">></span></span>
<span class="line"><span style="color:#24292E">    &#x3C;/></span></span>
<span class="line"><span style="color:#24292E">  );</span></span>
<span class="line"><span style="color:#24292E">}</span></span>
<span class="line"></span>
<span class="line"><span style="color:#6F42C1">render</span><span style="color:#24292E">(VeggieSearch, document.body);</span></span></code></pre><h2>JSX config</h2><p>Configure typescript for cas-9 jsx.</p><pre class="shiki github-light" style="background-color:#fff;color:#24292e" tabindex="0"><code><span class="line"><span style="color:#6A737D">// tsconfig.json</span></span>
<span class="line"><span style="color:#24292E">{</span></span>
<span class="line"><span style="color:#005CC5">  "compilerOptions"</span><span style="color:#24292E">: {</span></span>
<span class="line"><span style="color:#005CC5">    "jsx"</span><span style="color:#24292E">: </span><span style="color:#032F62">"react-jsx"</span><span style="color:#24292E">,</span></span>
<span class="line"><span style="color:#005CC5">    "jsxImportSource"</span><span style="color:#24292E">: </span><span style="color:#032F62">"cas-9"</span></span>
<span class="line"><span style="color:#24292E">  }</span></span>
<span class="line"><span style="color:#24292E">}</span></span></code></pre></main></body></html>