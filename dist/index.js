import{computed,effect,setCurrentSub}from"alien-signals";const propKeys=new Set([`value`,`checked`,`disabled`]);export function jsx(e,o){if(e instanceof Function){let i=setCurrentSub(void 0),s=e(o);return setCurrentSub(i),s}let s=document.createElement(e),c=[];for(let e in o){let a=o[e];e===`children`?c=a:e.startsWith(`on`)&&e[2]==e[2].toUpperCase()?s.addEventListener(e.slice(2).toLowerCase(),a):a instanceof Function?effect(()=>{setAttrOrProp(s,e,a())}):setAttrOrProp(s,e,a)}return render(c,s),s}function setAttrOrProp(e,i,a){propKeys.has(i)?e[i]=a:e.setAttribute(i,a)}export{jsx as jsxDEV,jsx as jsxs,jsx as jsxsDEV};export const Fragment=e=>e.children;export function render(a,o){let s=[a].flat(9).map(i=>i instanceof Function?computed(()=>i()):i);effect(()=>{let e=[];if(pushNodes(s,e),!e.length||!o.childNodes.length)return o.replaceChildren(...e);let i=new Set(e);for(let e of Array.from(o.childNodes))i.has(e)||e.remove();for(let i=0;i<e.length;i++){let a=o.childNodes[i];if(!a){o.append(...e.slice(i));break}a!==e[i]&&o.insertBefore(e[i],a)}})}function pushNodes(e,i){if(e instanceof Node)i.push(e);else if(Array.isArray(e))for(let a of e.flat(9))pushNodes(a,i);else e instanceof Function?pushNodes(e(),i):e!=null&&e!==!1&&i.push(document.createTextNode(`${e}`))}